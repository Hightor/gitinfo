\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{gitsetinfo}[2011/08/10 v1.00 Auxiliary package for gitinfo]
\RequirePackage{kvoptions}
\RequirePackage{xstring}
\RequirePackage{etoolbox}
\SetupKeyvalOptions{%
	family=gitinfo,
	prefix=gitInf@
	}
\DeclareStringOption{shash}
\DeclareStringOption{lhash}
\DeclareStringOption{authname}
\DeclareStringOption{authemail}
\DeclareStringOption{authsdate}
\DeclareStringOption{authidate}
\DeclareStringOption{authudate}
\DeclareStringOption{commname}
\DeclareStringOption{commemail}
\DeclareStringOption{commsdate}
\DeclareStringOption{commidate}
\DeclareStringOption{commudate}
\DeclareStringOption{refnames}
\DeclareStringOption{subject}
\ProcessKeyvalOptions*
\newcommand{\gitAbbrevHash}{\gitInf@shash}
\newcommand{\gitHash}{\gitInf@lhash}
\newcommand{\gitAuthorName}{\gitInf@authname}
\newcommand{\gitAuthorEmail}{\gitInf@authemail}
\newcommand{\gitAuthorDate}{\gitInf@authsdate}
\newcommand{\gitAuthorIsoDate}{\gitInf@authidate}
\newcommand{\gitAuthorUnixDate}{\gitInf@authudate}
\newcommand{\gitCommitterName}{\gitInf@commname}
\newcommand{\gitCommitterEmail}{\gitInf@commemail}
\newcommand{\gitCommitterDate}{\gitInf@commsdate}
\newcommand{\gitCommitterIsoDate}{\gitInf@commidate}
\newcommand{\gitCommitterUnixDate}{\gitInf@commudate}
\newcommand{\gitCommitMessage}{\gitInf@subject}
\newcommand{\gitReferences}{\gitInf@refnames}
\newcommand{\gitVtag}{}
\newcommand{\gitVtagn}{\space(None)}
\newcommand{\git@vtag}[1]{%
	\PackageInfo{gitinfo}{Processing #1}
	\def\do##1{%
		\IfDecimal{##1}{\renewcommand{\gitVtag}{\space##1}\renewcommand{\gitVtagn}{\space##1}\listbreak}{\PackageInfo{git}{##1 no}}%
	}%
	\expandafter\docsvlist\expandafter{#1}%
}%
\git@vtag{\gitInf@refnames}
